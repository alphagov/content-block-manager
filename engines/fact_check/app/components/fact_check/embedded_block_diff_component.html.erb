<div class="app-c-embedded-objects-blocks-component">
  <% if items.length.positive? %>
    <div class="app-c-embedded-objects-blocks-component__main-summary-card-wrapper">
      <%= render "govuk_publishing_components/components/summary_card", {
        title:,
        rows:,
      } do %>
        <% nested_items(items).each do |nested_field, items| %>
          <% if items.is_a?(Array) %>
            <%= render FactCheck::NestedBlockDiffComponent.with_collection(
              items.each_with_index.map { |item, index| CombinedEditionDetails.new(get_published_item(nested_field, index), item).content },
              field: schema.field(nested_field),
              ) %>
          <% else %>
            <%= render FactCheck::NestedBlockDiffComponent.new(
              items: CombinedEditionDetails.new(get_published_item(nested_field), items).content,
              field: schema.field(nested_field),
              ) %>
          <% end %>
        <% end %>
      <% end %>
    </div>
  <% end %>
</div>
