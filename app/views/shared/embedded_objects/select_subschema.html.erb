<% content_for :context, @edition.title %>
<% content_for :title, "Add #{add_indefinite_article @group.humanize.singularize.downcase}" %>

<% content_for :back_link do %>
  <%= render "govuk_publishing_components/components/back_link", {
    href: @back_link,
  } %>
<% end %>

<% content_for :title_side do %>
  <%= render "shared/preview_link", edition: @edition %>
<% end %>

<% if flash[:error] %>
  <%= render Edition::New::ErrorSummaryComponent.new(
    error_message: flash[:error],
    ) %>
<% end %>

<div id="edition_<%= @edition.id %>">
  <%= form_with url: @redirect_path, method: :post do %>
    <%= hidden_field_tag :object_type, "" %>
    <%= hidden_field_tag :group, @group %>

    <%= render Document::EmbeddedObjects::New::SelectSubschemaComponent.new(
      heading: content_for(:page_title),
      heading_caption: content_for(:context),
      error_message: flash[:error],
      schemas: @subschemas,
      ) %>

    <div class="govuk-button-group">
      <%= render "govuk_publishing_components/components/button", {
        text: "Save and continue",
        name: "save_and_continue",
        value: "Save and continue",
        type: "submit",
      } %>
      <%= render "govuk_publishing_components/components/button", {
        text: "Cancel",
        name: "cancel",
        value: "cancel",
        href: @back_link,
        secondary_solid: true,
      } %>
    </div>
  <% end %>
</div>
