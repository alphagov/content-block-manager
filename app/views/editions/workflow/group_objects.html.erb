<% content_for :context, context %>
<% content_for :title, "#{@action} #{@group_name.humanize(capitalize: false)}" %>
<% content_for :title_margin_bottom, 4 %>
<% content_for :back_link do %>
  <%= render "govuk_publishing_components/components/back_link", {
    href: back_path,
  } %>
<% end %>

<% content_for :title_side do %>
  <%= render "shared/preview_link", edition: @edition %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <div id="edition_<%= @edition.id %>">
      <% if flash[:error] %>
        <%= render Edition::New::ErrorSummaryComponent.new(
          error_message: flash[:error],
          ) %>
      <% end %>

      <%= form_with url: workflow_path(
        @edition,
        step: @step_name,
        ), method: :put, id: @step_name, **form_data_attributes do %>
        <%= render Edition::Workflow::GroupComponent.new(
          edition: @edition,
          subschemas: @subschemas,
          ) %>
      <% end %>

      <%= render("govuk_publishing_components/components/button", {
        text: I18n.t("buttons.add_another", item: @group_name.humanize.singularize.downcase),
        href: new_embedded_object_edition_path(
          @edition,
          group: @group_name,
          ),
        margin_bottom: 6,
        secondary_solid: true,
      }) %>

      <%= render Shared::ContinueOrCancelButtonGroup.new(
        form_id: @step_name,
        edition: @edition,
        ) %>
    </div>
  </div>
</div>
