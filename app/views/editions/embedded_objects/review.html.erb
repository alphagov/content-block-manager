<% content_for :context, @edition.title %>
<% content_for :title, "Review #{@subschema.name.singularize.downcase}" %>

<% content_for :back_link do %>
  <%= render "govuk_publishing_components/components/back_link", {
    href: edit_embedded_object_edition_path(
      @edition,
      object_type: @subschema.block_type,
      object_title: @object_title,
    ),
  } %>
<% end %>

<% if flash[:error] %>
  <%= render "govuk_publishing_components/components/error_summary", {
    title: "There is a problem",
    items: [{ text: flash[:error], href: "#is_confirmed-0" }],
  } %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <%= render Shared::EmbeddedObjects::SummaryCardComponent.new(
      edition: @edition,
      object_type: @subschema.block_type,
      object_title: @object_title,
    ) %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <%= form_with(
          url: publish_embedded_object_edition_path(
            @edition,
            object_type: @subschema.block_type,
            object_title: @object_title,
          ),
          id: "review",
          method: :post,
          ) do %>
      <%= render "govuk_publishing_components/components/checkboxes", {
        name: "is_confirmed",
        id: "is_confirmed",
        heading: "Confirm",
        visually_hide_heading: true,
        no_hint_text: true,
        error: flash[:error],
        items: [
          {
            label: "I confirm that the details Iâ€™ve put into the content block have been checked and are factually correct.",
            value: true,
          },
        ],
      } %>
    <% end %>
  </div>
</div>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <%= render Shared::ContinueOrCancelButtonGroup.new(
      form_id: "review",
      button_text: "Create",
      edition: @edition,
      ) %>
  </div>
</div>
