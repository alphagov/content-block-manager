<%= tag.div(class: component_classes) do %>
  <div class="app-c-embedded-objects-blocks-component__main-summary-card-wrapper">
    <%= render "govuk_publishing_components/components/summary_card", {
      title:,
      rows: summary_card_rows,
    } %>
  </div>

  <% if !schema.embeddable_as_block? %>
    <% nested_blocks.each do |args| %>
      <%= render "govuk_publishing_components/components/summary_card", **args %>
    <% end %>
  <% else %>
    <div class="app-c-embedded-objects-blocks-component__details-wrapper">
      <% attributes = capture do %>
        <div class="app-c-embedded-objects-blocks-component__details-text">
          <%= I18n.t("embed_codes.all_attributes", object_name: object_name) %> <%= I18n.t("embed_codes.description") %>
        </div>
        <div class="app-c-embedded-objects-blocks-component__details-summary-list">
          <%= render "govuk_publishing_components/components/summary_list", {
            items: attribute_rows(:field),
          } %>

          <% nested_blocks.each do |args| %>
            <%= render "govuk_publishing_components/components/summary_card", **args %>
          <% end %>
        </div>
      <% end %>

      <%= render "govuk_publishing_components/components/details", {
        title: "All #{object_name} attributes",
        summary_aria_attributes: {
          label: object_title,
        },
      } do %>
        <%= attributes %>
      <% end %>
    </div>
  <% end %>
<% end %>
